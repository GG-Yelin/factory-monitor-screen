<view class="inspector-page">
  <!-- 用户信息头部 -->
  <view class="header-card">
    <view class="user-info">
      <view class="avatar">
        <text>{{userInfo.name ? userInfo.name[0] : 'U'}}</text>
      </view>
      <view class="user-detail">
        <view class="user-name">{{userInfo.name || '未登录'}}</view>
        <view class="user-meta">
          <text class="employee-no">工号: {{userInfo.employeeNo || '-'}}</text>
          <text class="role-tag">质检员</text>
        </view>
      </view>
    </view>
    <view class="header-stats">
      <view class="stat-item">
        <view class="stat-value">{{todayStats.inspectedCount || 0}}</view>
        <view class="stat-label">今日质检</view>
      </view>
      <view class="stat-item">
        <view class="stat-value">{{todayStats.passedCount || 0}}</view>
        <view class="stat-label">合格批次</view>
      </view>
      <view class="stat-item">
        <view class="stat-value">{{todayStats.passRate || '0'}}%</view>
        <view class="stat-label">合格率</view>
      </view>
    </view>
  </view>

  <!-- 快捷操作 -->
  <view class="card">
    <view class="card-title">快捷操作</view>
    <view class="action-grid">
      <view class="action-item" bindtap="goToScanInspection">
        <view class="action-icon scan-icon">
          <text>&#xe619;</text>
        </view>
        <view class="action-text">扫码质检</view>
      </view>
      <view class="action-item" bindtap="goToInspectionList">
        <view class="action-icon list-icon">
          <text>&#xe61a;</text>
        </view>
        <view class="action-text">质检记录</view>
      </view>
      <view class="action-item" bindtap="goToWage">
        <view class="action-icon wage-icon">
          <text>&#xe61b;</text>
        </view>
        <view class="action-text">我的工资</view>
      </view>
      <view class="action-item" bindtap="goToProfile">
        <view class="action-icon profile-icon">
          <text>&#xe61c;</text>
        </view>
        <view class="action-text">个人中心</view>
      </view>
    </view>
  </view>

  <!-- 待质检列表 -->
  <view class="card">
    <view class="card-header">
      <view class="card-title">待质检</view>
      <view class="card-more" bindtap="goToInspectionList">查看全部 ></view>
    </view>

    <view wx:if="{{loading}}" class="loading">
      <text>加载中...</text>
    </view>

    <view wx:elif="{{pendingList.length === 0}}" class="empty">
      <text class="empty-text">暂无待质检工单</text>
    </view>

    <view wx:else class="pending-list">
      <view class="pending-item" wx:for="{{pendingList}}" wx:key="id" bindtap="goToInspection" data-id="{{item.id}}">
        <view class="pending-header">
          <text class="pending-no">{{item.workOrderNo}}</text>
          <text class="tag tag-warning">待质检</text>
        </view>
        <view class="pending-info">
          <view class="info-row">
            <text class="label">产品:</text>
            <text class="value">{{item.productName}}</text>
          </view>
          <view class="info-row">
            <text class="label">数量:</text>
            <text class="value">{{item.quantity}}件</text>
          </view>
        </view>
      </view>
    </view>
  </view>
</view>

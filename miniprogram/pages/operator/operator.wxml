<view class="operator-page">
  <!-- ç”¨æˆ·ä¿¡æ¯å¤´éƒ¨ -->
  <view class="header-card">
    <view class="user-info">
      <view class="avatar">
        <text>{{userInfo.realName ? userInfo.realName[0] : (userInfo.username ? userInfo.username[0] : 'U')}}</text>
      </view>
      <view class="user-detail">
        <view class="user-name">{{userInfo.realName || userInfo.username || 'æœªç™»å½•'}}</view>
        <view class="user-meta">
          <text class="employee-no">å·¥å·: {{userInfo.employeeNo || '-'}}</text>
          <text class="team-name" wx:if="{{userInfo.teamName}}">{{userInfo.teamName}}</text>
        </view>
      </view>
    </view>
    <view class="header-stats">
      <view class="stat-item">
        <view class="stat-value">{{todayStats.completedCount || 0}}</view>
        <view class="stat-label">ä»Šæ—¥å®Œæˆ</view>
      </view>
      <view class="stat-item">
        <view class="stat-value">{{todayStats.totalQuantity || 0}}</view>
        <view class="stat-label">å®Œæˆæ•°é‡</view>
      </view>
      <view class="stat-item">
        <view class="stat-value">{{todayStats.wage || '0.00'}}</view>
        <view class="stat-label">ä»Šæ—¥å·¥èµ„</view>
      </view>
    </view>
  </view>

  <!-- å¿«æ·æ“ä½œ -->
  <view class="card">
    <view class="card-title">å¿«æ·æ“ä½œ</view>
    <view class="action-grid">
      <view class="action-item" bindtap="goToScanReport">
        <view class="action-icon scan-icon">
          <text class="icon-emoji">ğŸ“·</text>
        </view>
        <view class="action-text">æ‰«ç æŠ¥å·¥</view>
      </view>
      <view class="action-item" bindtap="goToTasks">
        <view class="action-icon task-icon">
          <text class="icon-emoji">ğŸ“‹</text>
        </view>
        <view class="action-text">æˆ‘çš„ä»»åŠ¡</view>
      </view>
      <view class="action-item" bindtap="goToWage">
        <view class="action-icon wage-icon">
          <text class="icon-emoji">ğŸ’°</text>
        </view>
        <view class="action-text">æˆ‘çš„å·¥èµ„</view>
      </view>
      <view class="action-item" bindtap="goToProfile">
        <view class="action-icon profile-icon">
          <text class="icon-emoji">ğŸ‘¤</text>
        </view>
        <view class="action-text">ä¸ªäººä¸­å¿ƒ</view>
      </view>
    </view>
  </view>

  <!-- è¿›è¡Œä¸­çš„ä»»åŠ¡ -->
  <view class="card">
    <view class="card-header">
      <view class="card-title">è¿›è¡Œä¸­çš„ä»»åŠ¡</view>
      <view class="card-more" bindtap="goToTasks">æŸ¥çœ‹å…¨éƒ¨ ></view>
    </view>

    <view wx:if="{{loading}}" class="loading">
      <text>åŠ è½½ä¸­...</text>
    </view>

    <view wx:elif="{{tasks.length === 0}}" class="empty">
      <text class="empty-text">æš‚æ— è¿›è¡Œä¸­çš„ä»»åŠ¡</text>
    </view>

    <view wx:else class="task-list">
      <view class="task-item" wx:for="{{tasks}}" wx:key="id" bindtap="goToTaskDetail" data-id="{{item.id}}">
        <view class="task-header">
          <text class="task-no">{{item.workOrderNo}}</text>
          <text class="tag tag-{{item.statusType}}">{{item.statusLabel}}</text>
        </view>
        <view class="task-info">
          <view class="info-row">
            <text class="label">äº§å“:</text>
            <text class="value">{{item.productName}}</text>
          </view>
          <view class="info-row">
            <text class="label">å·¥åº:</text>
            <text class="value">{{item.processName}}</text>
          </view>
          <view class="info-row">
            <text class="label">è¿›åº¦:</text>
            <text class="value">{{item.completedQuantity}} / {{item.planQuantity}}</text>
          </view>
        </view>
        <view class="progress-bar">
          <view class="progress-bar-inner" style="width: {{item.progress}}%"></view>
        </view>
      </view>
    </view>
  </view>
</view>
